<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POP.Game</title>

    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />
    <!-- font awesome cdn link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- custom css file link -->
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/css/allStyle.css">
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/css/style.css">
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/css/headerStyle.css">
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/css/footerStyle.css">


    <!-- Favicon -->
    <link rel="shortcut icon" href="/CGA101G1/frontend/mainCss/images/logo.png">
    <!-- Fonts CSS -->
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/assets/vendor/fonts/fonts.css">
    <!-- Bootstrap-icons CSS -->
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/assets/vendor/bootstrap/icons/bootstrap-icons.css">
    <!--Magnific-Popup CSS -->
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/assets/vendor/magnific/magnific-popup.css">
    <!-- Slick CSS -->
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/assets/vendor/slick/slick.css">
    <!-- Style CSS -->
    <link rel="stylesheet" href="/CGA101G1/frontend/mainCss/assets/css/style01.css">
    <link rel="stylesheet" href="/CGA101G1/frontend/mem/css/MemStyle.css">
</head>

<body>


    <!-- header section starts-->

    <header>

        <div class="logo-div">
            <img src="/CGA101G1/frontend/mainCss/images/logo.png" alt="">
            <a href="/CGA101G1/frontend/HomePage/HomePage.html" class="logo">帕Game</a>
        </div>


        <nav class="navbar">
            <!-- 上方標籤列 -->
            <a class="active" href="/CGA101G1/frontend/HomePage/HomePage.html">首頁</a>
            <a href="/CGA101G1/frontend/Product/HomePageinshop.html" class="nav-link">商品區</a>
            <a href="/CGA101G1/frontend/bid/listallbid.html" class="nav-link">競標區</a>
            <a href="/CGA101G1/frontend/forum/forumHomePage.jsp" class="nav-link">討論區</a>
        </nav>

        <div class="icons">
            <!--右上方小icon區-->
            <i class="fas fa-bars" id="menu-bars"></i>
            <a href="/CGA101G1/frontend/mem/updateMemberData.html" class="fas fa-solid fa-user-astronaut"
                id="login-icon"></a>
            <a href="/CGA101G1/frontend/Product/HomePageinProduct-wishlist.jsp" class="fas fa-heart"></a>
            <a href="/CGA101G1/frontend/Product/shopping-cart.html" class="fas fa-shopping-cart" id="cart"></a>
        </div>

    </header>


    <!-- header section ends-->
    <!-- shopping-cart div starts -->
    <div id="shopping-cart">
        <span>Monopoly</span>
    </div>
    <!-- shopping-cart div ends -->

    <!-- home section starts-->

    <!-- Main -->
    <main>
        <!-- Breadcrumb -->
        <div class="py-3 bg-gray-100">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6 my-2">
                        <h1 class="m-0 h4 text-center text-lg-start">Shop</h1>
                    </div>
                    <div class="col-lg-6 my-2">
                        <ol class="breadcrumb dark-link m-0 small justify-content-center justify-content-lg-end">
                            <li class="breadcrumb-item"><a class="text-nowrap" href="index.html"><i
                                        class="bi bi-home"></i>Home</a></li>
                            <li class="breadcrumb-item text-nowrap active" aria-current="page">Product</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Breadcrumb -->
        <!-- login page -->
        <div class="section">
            <div class="container">
                <div class="justify-content-center row">
                    <div class="col-lg-5 col-xxl-4">
                        <div class="card">
                            <div class="card-header bg-transparent py-3">
                                <h3 class="h4 mb-0" style="text-align: center;">註冊成為會員 </h3>
                            </div>
                            <div class="card-body">
                                <div class="register1" style="display: flex;">
                                    <div>
                                        <div class="form-group mb-3">
                                            <label for="memAccount" class="form-label">帳號:<span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="memAccount" class="form-control" placeholder="您的帳號"
                                                style="text-transform: none;">
                                            <label id="l1" style="color: red; font-size: 15;"></label>
                                        </div>

                                        <div class="form-group mb-3">
                                            <label for="memPassword" class="form-label">密碼:<span
                                                    class="text-danger">*</span></label>
                                            <input type="password" id="memPassword" class="form-control"
                                                placeholder="您的密碼" style="text-transform: none;">
                                            <label id="l2" style="color: red; font-size: 15;"></label>
                                        </div>

                                        <div class="form-group mb-3">
                                            <label for="confirmPassword" class="form-label">確認密碼:<span
                                                    class="text-danger">*</span></label>
                                            <input type="password" id="confirmPassword" class="form-control"
                                                placeholder="確認密碼" style="text-transform: none;">
                                            <label id="l3" style="color: red; font-size: 15;"></label>
                                        </div>

                                        <div class="form-group mb-3">
                                            <label for="memName" class="form-label">帳戶名稱:<span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="memName" class="form-control" placeholder="您的帳戶名稱"
                                                style="text-transform: none;">
                                            <label id="l4" style="color: red; font-size: 15;"></label>
                                        </div>


                                        <div class="form-group mb-3">
                                            <label for="memMobile" class="form-label">行動電話:<span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="memMobile" class="form-control" placeholder="您的行動電話"
                                                style="text-transform: none;">
                                            <label id="l5" style="color: red; font-size: 15;"></label>
                                        </div>
                                    </div>
                                    <div>
                                        <div class=" form-group mb-3">
                                            <label for="memEmail" class="form-label">E-mail:<span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="memEmail" class="form-control" placeholder="您的E-mail"
                                                style="text-transform: none;">
                                            <label id="l7" style="color: red; font-size: 15;"></label>
                                        </div>

                                        <div class="form-group mb-3">
                                            <label for="memBirth" class="form-label">出生年月日:<span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="memBirth" class="form-control" placeholder="您的出生年月日"
                                                style="text-transform: none;">
                                            <label id="d1" style="color: red; font-size: 15;"></label>
                                        </div>
                                        <div class="city-selector-set">
                                            <div class="form-group mb-3">
                                                <label for="memCity" class="form-label">居住縣市:<span
                                                        class="text-danger">*</span></label>
                                                <!-- <input type="text" id="email_1" class="form-control"
                                                    placeholder="您的居住縣市"> -->
                                                <select class="county" id="memCity" class="form-control"></select>
                                                <label id="s1" style="color: red; font-size: 15;"></label>
                                            </div>

                                            <div class="form-group mb-3">
                                                <label for="memDist" class="form-label">鄉/鎮/市/區:<span
                                                        class="text-danger">*</span></label>
                                                <!-- <input type="text" id="memDist" class="form-control"
                                                    placeholder="您的鄉/鎮/市/區"> -->
                                                <select class="district" id="memDist" class="form-control"></select>
                                                <label id="s2" style="color: red; font-size: 15;"></label>
                                            </div>
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="memAdd" class="form-label">地址:<span
                                                    class="text-danger">*</span></label>
                                            <input type="text" id="memAdd" class="form-control" placeholder="您的地址"
                                                style="text-transform: none;">
                                            <label id="l6" style="color: red; font-size: 15;"></label>
                                        </div>
                                    </div>
                                </div>
                                <!-- Checkbox -->
                                <!-- <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" value="" id="form2Example3"
                                        checked />
                                    <label class="form-check-label" for="form2Example3"> 記住帳號 </label>
                                </div> -->
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" value="agree" id="agree" />
                                    <label class="form-check-label" for="form2Example3"> <span
                                            class="col ms-auto small text-end"><a
                                                href="/CGA101G1/frontend/mem/agree.html">
                                                我同意條款內文 </a></span> </label>
                                </div>
                                <div class="form-group text-center">
                                    <button type="button" class="btn btn-primary w-100" id="btn1">
                                        註冊
                                    </button>
                                </div>
                                <label id="l8" style="color: red; font-size: 15;"></label>
                                <div id="errMsg" class="error" style="color: red; font-size: 15;"></div>
                                <!-- <div class="text-center pt-4 pb-5">
                                    <span class="px-3 bg-white d-inline-block align-top lh-sm">OR</span>
                                    <div class="border-bottom mt-n3"></div>
                                </div>
                                <div class="row g-2">
                                    <div class="col">
                                        <button class="btn w-100 btn-dark" type="button"><i
                                                class="bi bi-facebook me-2"></i> Facebook</button>
                                    </div>
                                    <div class="col">
                                        <button class="btn w-100 btn-dark" type="button"><i
                                                class="bi bi-twitter me-2"></i> Twitter</button>
                                    </div>
                                </div> -->
                                <!-- <div class="pt-4 text-center">
                                    <span class="text-muted">還沒有加入會員嗎? <a href="sign-up.html">點選這裡前往註冊!!
                                        </a></span>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end login -->
    </main>
    <!-- End Main -->
    <!-- Footer -->
    <footer class="bg-white footer">
        <div class="footer-top py-6">
            <div class="container">
                <div class="row">
                    <section class="footer">
                        <div class="box-container">
                            <div class="box">
                                <h3>會員專區</h3>
                                <a href="#">會員登入</a>
                                <a href="#">會員註冊</a>
                                <a href="#">訂單管理</a>
                                <a href="#">二手遊戲申請上架單管理</a>
                            </div>

                            <div class="box">
                                <h3>快速連結</h3>
                                <a href="#">首頁</a>
                                <a href="#">遊戲商城</a>
                                <a href="#">二手競標商城</a>
                                <a href="#">遊戲討論區</a>
                            </div>

                            <div class="box">
                                <h3>聯絡我們</h3>
                                <a href="#">02-3456-7890</a>
                                <a href="#">03-1111-2222</a>
                                <a href="#">CGA101G1@gmail.com</a>
                                <a href="#">anasbhai@gmail.com</a>
                            </div>

                            <div class="box">
                                <h3>關於我們</h3>
                                <a href="#">管理團隊</a>
                                <a href="#">創始理念</a>
                                <a href="#">insuagram</a>
                                <a href="#">linkedin</a>
                            </div>
                        </div>

                        <div class="credit">copyright@2022 by <span>CGA101G1</span></div>

                    </section>
                </div>
            </div>
        </div>

    </footer>
    <!-- End Footer -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tw-city-selector@2.1.1/dist/tw-city-selector.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/CGA101G1/datetimepicker/jquery.datetimepicker.css" />
    <script src="/CGA101G1/datetimepicker/jquery.js"></script>
    <script src="/CGA101G1/datetimepicker/jquery.datetimepicker.full.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://unpkg.com/vue@next"></script>
    <script>
        //日期
        $.datetimepicker.setLocale('zh'); // kr ko ja en
        $('#memBirth').datetimepicker({
            theme: '',          //theme: 'dark',
            timepicker: false,   //timepicker: false,
            step: 1,            //step: 60 (這是timepicker的預設間隔60分鐘)
            format: 'Y-m-d ',
            value: new Date()
            //disabledDates:    ['2022/06/08','2022/06/09','2022/06/10'], // 去除特定不含
            //startDate:	        '2022/07/10',  // 起始日
            //minDate:           '-1970-01-01', // 去除今日(不含)之前
            //maxDate:           '+1970-01-01'  // 去除今日(不含)之後
        });
        var somedate2 = new Date();
        $('#memBirth').datetimepicker({
            beforeShowDay: function (date) {
                if (date.getYear() > somedate2.getYear() ||
                    (date.getYear() == somedate2.getYear() && date.getMonth() > somedate2.getMonth()) ||
                    (date.getYear() == somedate2.getYear() && date.getMonth() == somedate2.getMonth() && date.getDate() > somedate2.getDate())
                ) {
                    return [false, ""]
                }
                return [true, ""];
            }
        });
        //居住地
        new TwCitySelector({
            el: '.city-selector-set',
            elCounty: '.county',
            // countyValue: "台北市",
            elDistrict: '.district'
            // districtValue: "大安區"
        });
        $('#memBirth').blur(
            () => {
                if ($('#memBirth').val().length === 0) {
                    $('#d1').text(`尚未選擇`)
                } else {
                    $('#d1').text(`選擇完畢`)
                }
            })
        $('#memCity').blur(
            () => {
                if ($('#memCity').find('option:selected').text().length === 0) {
                    $('#s1').text(`尚未選擇`)
                } else {
                    $('#s1').text(`選擇完畢`)
                }
            })
        $('#memDist').blur(
            () => {
                if ($('#memDist').find('option:selected').text().length === 0) {
                    $('#s2').text(`尚未選擇`)
                } else {
                    $('#s2').text(`選擇完畢`)
                }
            })

        $('#memAccount').blur(
            () => {

                $.ajax({
                    type: 'POST',
                    url: '/CGA101G1/mem/MemAccountAuthServlet',
                    data: JSON.stringify({
                        memAccount: memAccount.value
                    }),
                    success: data => {
                        let { successful, message } = data;
                        const r1 = /^[A-Za-z\d]{6,12}$/;
                        if (r1.test($('#memAccount').val()) && successful) {
                            $('#l1').text(`輸入完畢`)
                        } else if ($('#memAccount').val().length === 0) {
                            $('#l1').text(`尚未輸入`);
                        } else if (!successful) {
                            $('#l1').text(message);
                        } else
                            $('#l1').text(`請輸入英文及數字，且帳號長度需大於5小於13字數`);


                    }
                })
            })
        $('#memPassword').blur(
            () => {
                const r1 = /^[A-Za-z\d]{6,12}$/;
                if (r1.test($('#memPassword').val())) {
                    $('#l2').text(`輸入完畢`)
                } else if ($('#memPassword').val().length === 0) {
                    $('#l2').text(`尚未輸入`);
                } else
                    $('#l2').text(`請輸入英文及數字，且密碼長度需大於5小於13字數`);
            })
        $('#confirmPassword').blur(
            () => {
                if ($('#memPassword').val() === $('#confirmPassword').val() && $('#confirmPassword').val().length !== 0 && $('#confirmPassword').val() !== "") {
                    $('#l3').text(`密碼一致`)
                } else if ($('#confirmPassword').val().length === 0) {
                    $('#l3').text(`尚未輸入`);
                } else
                    $('#l3').text(`密碼不一致`);
            })
        $('#memName').blur(
            () => {
                if ($('#memName').val().length === 0) {
                    $('#l4').text(`尚未輸入`);
                } else
                    $('#l4').text(`輸入完畢`);
            })

        $('#memMobile').blur(
            () => {
                const r1 = /^09\d{8}$/;
                if (r1.test($('#memMobile').val())) {
                    $('#l5').text(`輸入完畢`)
                } else if ($('#memMobile').val().length === 0) {
                    $('#l5').text(`尚未輸入`);
                } else
                    $('#l5').text(`請輸入行動電話為09開頭，共10位數字號碼`);
            })
        $('#memAdd').blur(
            () => {
                if ($('#memAdd').val().length === 0) {
                    $('#l6').text(`尚未輸入`);
                } else
                    $('#l6').text(`輸入完畢`);
            })
        $('#memEmail').blur(
            () => {
                $.ajax({
                    type: 'POST',
                    url: '/CGA101G1/mem/MemEmailAuthServlet',
                    data: JSON.stringify({
                        memEmail: memEmail.value
                    }),
                    success: data => {
                        let { successful, message } = data;
                        console.log(successful)
                        console.log(message)
                        const r1 = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
                        if (r1.test($('#memEmail').val()) && successful) {
                            $('#l7').text(`輸入完畢`)
                        } else if ($('#memEmail').val().length === 0) {
                            $('#l7').text(`尚未輸入`);
                        } else if (!successful) {
                            $('#l7').text(message);
                        } else
                            $('#l7').text(`請輸入電子郵件格式`);


                    }
                })
            })
                    
        $("#btn1").click(() => {
        	if ($("#agree").prop('checked')) {
                if ($('#memAccount').val().length === 0 ||
                    $('#memPassword').val().length === 0 ||
                    $('#confirmPassword').val().length === 0 ||
                    $('#memName').val().length === 0 ||
                    $('#memMobile').val().length === 0 ||
                    $('#memAdd').val().length === 0 ||
                    $('#memEmail').val().length === 0 ||
                    $('#memBirth').val().length === 0 ||
                    $('#memCity').val().length === 0 ||
                    $('#memDist').val().length === 0 ||
                    $('#memBirth').val().length === 0
                ) {
                    $('#l8').text(`輸入有誤或尚有欄位未輸入`);
                } else if (
                    $('#l1').text() === '請輸入英文及數字，且帳號長度需大於5小於13字數' ||
                    $('#l1').text() === '尚未輸入' ||
                    $('#l1').text() === '此帳號已有人使用' ||
                    $('#l2').text() === '請輸入英文及數字，且密碼長度需大於5小於13字數' ||
                    $('#l2').text() === '尚未輸入' ||
                    $('#l3').text() === '密碼不一致' ||
                    $('#l3').text() === '尚未輸入' ||
                    $('#l4').text() === '尚未輸入' ||
                    $('#l5').text() === '請輸入行動電話為09開頭，共10位數字號碼' ||
                    $('#l5').text() === '尚未輸入' ||
                    $('#l6').text() === '尚未輸入' ||
                    $('#l7').text() === '請輸入電子郵件格式' ||
                    $('#l7').text() === '此信箱已註冊過' ||
                    $('#l7').text() === '尚未輸入' ||
                    $('#d1').text() === '尚未選擇' ||
                    $('#s2').text() === '尚未選擇' ||
                    $('#s1').text() === '尚未選擇'
                ) {
                    $('#l8').text(`格式有誤或尚有欄位未輸入`);
                } else {
                    $('#l8').text('');

                    $.ajax({
                        type: 'POST',
                        url: "/CGA101G1/mem/RegisterServlet",
                        contentType: "application/json",
                        data: JSON.stringify({
                            memAccount: memAccount.value,
                            memPassword: memPassword.value,
                            confirmPassword: confirmPassword.value,
                            memName: memName.value,
                            memMobile: memMobile.value,
                            memAdd: memAdd.value,
                            memEmail: memEmail.value,
                            memBirth: memBirth.value,
                            memCity: memCity.value,
                            memDist: memDist.value,
                        }),
                        success: data => {
                            const { successful, message } = data;
                            console.log(successful);
                            if (successful) {
                                console.log(message);
                                swal(message, "", "success")
                                // .then(function () {

                                // })
                                // location = "login.html";
                            } else {
                                $("#l8").html(message);
                            }

                            swal(message, "", "success")
                                .then(function () {

                                })
                        }
                    })
                }
        	}else{
            	swal("請點擊我同意條款內文，並詳閱，確認後勾選方框!", "", "error")
            }
            })


    </script>




</body>
<!-- end body -->

</html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POP.Game</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.2/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />
    <!-- font awesome cdn link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- custom css file link -->
    <link rel="stylesheet" href="../mainCss/css/allStyle.css">
    <link rel="stylesheet" href="../mainCss/css/style.css">
    <link rel="stylesheet" href="../mainCss/css/headerStyle.css">
    <link rel="stylesheet" href="../mainCss/css/footerStyle.css">


    <!-- Favicon -->
    <link rel="shortcut icon" href="/CGA101G1/frontend/mainCss/images/logo.png">
    <!-- Fonts CSS -->
    <link rel="stylesheet" href="../mainCss/assets/vendor/fonts/fonts.css">
    <!-- Bootstrap-icons CSS -->
    <link rel="stylesheet" href="../mainCss/assets/vendor/bootstrap/icons/bootstrap-icons.css">
    <!--Magnific-Popup CSS -->
    <link rel="stylesheet" href="../mainCss/assets/vendor/magnific/magnific-popup.css">
    <!-- Slick CSS -->
    <link rel="stylesheet" href="../mainCss/assets/vendor/slick/slick.css">
    <!-- Style CSS -->
    <link rel="stylesheet" href="../mainCss/assets/css/style01.css">
    <style>
        #carouselExampleControls {
            position: relative;
            left: 25%;
        }
    </style>
</head>

<body>

    <!-- header section starts-->

    <header>

        <div class="logo-div">
            <img src="/CGA101G1/frontend/mainCss/images/logo.png" alt="">
            <a href="/CGA101G1/frontend/HomePage.html" class="logo">帕Game</a>
        </div>


        <nav class="navbar">
            <!-- 上方標籤列 -->
            <a class="active" href="/CGA101G1/frontend/HomePage/HomePage.html">首頁</a>
            <a href="/CGA101G1/frontend/Product/HomePageinshop.html">商品區</a>
            <!-- <a href="#news">遊戲新聞</a> -->
            <a href="/CGA101G1/frontend/bid/listallbid.html">競標區</a>
            <a href="/CGA101G1/frontend/forum/forumHomePage.jsp">討論區</a>
        </nav>

        <div class="icons">
            <!--右上方小icon區-->
            <i class="fas fa-bars" id="menu-bars"></i>
            <a href="/CGA101G1/frontend/mem/updateMemberData.html" class="fas fa-solid fa-user-astronaut"
                id="login-icon"></a>
            <a href="/CGA101G1/frontend/Product/HomePageinProduct-wishlist.jsp" class="fas fa-heart"></a>
            <a href="/CGA101G1/frontend/Product/shopping-cart.html" class="fas fa-shopping-cart" id="cart"></a>
        </div>

    </header>

    <!-- header section ends-->

    <!--Login starts-->

    <!-- shopping-cart div ends -->

    <!-- home section starts-->

    <!-- Main -->
    <main id="app">
        <!-- Breadcrumb -->
        <div class="py-3 bg-gray-100">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6 my-2">
                        <h1 class="m-0 h4 text-center text-lg-start">Shop</h1>
                    </div>
                    <div class="col-lg-6 my-2">
                        <ol class="breadcrumb dark-link m-0 small justify-content-center justify-content-lg-end">
                            <li class="breadcrumb-item"><a class="text-nowrap" href="index.html"><i
                                        class="bi bi-home"></i>Home</a></li>
                            <li class="breadcrumb-item text-nowrap active" aria-current="page">Product</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Breadcrumb -->
        <!-- Product Details -->
        <section class="product-details py-6">
            <div class="container">
                <div class="row align-items-start">
                    <!-- Product Gallery 在col-lg-6刪掉sticky-lg-top -->
                    <div class="col-lg-6 lightbox-gallery product-gallery ">
                        <div class="slick-carousel product-slider border rounded" data-slick='{
                                "slidesToShow": 1,
                                "slidesToScroll": 1,
                                "arrows": false,
                                "fade": true,
                                "asNavFor": ".product-thumb"
                            }'>
                            <!-- 商品大圖相片 要開-->
                            <div style="text-align: right;">
                                <a class="gallery-link"
                                    href="`data:image/png;base64,${jsonData.Pics[0].productPicContentBase64}`"><i
                                        class="bi bi-arrows-fullscreen"></i></a>
                                <img :src="`data:image/png;base64,${jsonData.Pics[0].productPicContentBase64}`"
                                    class="img-fluid" title="" alt="" style="width:60%; height: max-content;">
                            </div>
                        </div>
                    </div>
                    <!-- End Product Gallery -->
                    <!-- Product Details  商品內容 -->
                    <div class="col-lg-6 ps-lg-5 pt-5 pt-lg-0">
                        <div class="product-detail">
                            <div class="products-brand pb-2">
                                <span>Game Name</span>
                            </div>
                            <div class="products-title mb-2">
                                <h1 class="h1">{{jsonData.productName}}</h1>
                            </div>
                            <div class="col-sm-6">
                                <div class="rating-star small">
                                    <i class="bi small bi-star-fill active"
                                        v-for="(item, index) in CaledCommentsData.avgCommentStar" :key="index"></i>

                                    <i class="bi small bi-star"
                                        v-for="(item, index) in (5-CaledCommentsData.avgCommentStar)" :key="index"></i>
                                </div>
                            </div>
                            <div class="product-description" style="font-size: medium;">
                                <p>{{jsonData.itemProdDescription}}
                                </p>
                            </div>


                            <!-- 購買及價格設定 要開-->
                            <div class="product-price fs-3 fw-500 mb-2">
                                <span class="text-primary">NT.{{jsonData.productPrice}}</span>
                            </div>
                            <!-- 加入購物車 要開-->
                            <div class="product-detail-actions d-flex flex-wrap pt-3" style="height: 50px;">
                                <div class="cart-qty me-3 mb-3">
                                    <button type="button" @click="getComponentInfo" class="inc qty-btn">+</button>
                                    <card ref="innerComponent"></card>
                                    <button type="button" @click="subtraction" class="dec qty-btn">-</button>
                                </div>
                                <div class="cart-button mb-3 d-flex">
                                    <a @click="sendData()" class="btn btn-dark me-3">
                                        <i class="bi bi-cart"></i>
                                        加入購物車
                                    </a>
                                    <!-- 原本是jsonData[0].productNo -->
                                    <button @click="webcamSendRequestButton1($event)" :value="jsonData.productNo"
                                        class="btn btn-outline-dark me-3">
                                        <i class="bi bi-heart"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- 購買跟問問題 -->
                            <!-- <div class="product-info-buttons nav pt-4"> -->
                            <!-- <a href="javascript:void(0);" class="me-3" data-bs-toggle="modal"
                                    data-bs-target="#px_size_chart_modal"><i class="bi bi-scissors"></i>Size guide</a> -->
                            <!-- <a href="javascript:void(0);" class="" data-bs-toggle="modal"
                                    data-bs-target="#px_shipping_modal"><i class="bi bi-truck me-2"></i>Shipping</a>
                                <a href="javascript:void(0);" class="ms-auto" data-bs-toggle="modal"
                                    data-bs-target="#px_ask_modal"><i class="bi bi-envelope ms-auto"></i>Ask
                                    about
                                    product</a>
                            </div> -->
                            <!-- 商品的分類 要開-->
                            <div class="pt-3 border-top mt-3 small" style="font-size: medium;">
                                <p class="theme-link mb-2">
                                    <label class="m-0 text-dark">支援平台:</label>
                                    <a>{{jsonData.gamePlatformName}}</a>
                                </p>
                                <p class="theme-link mb-2">
                                    <label class="m-0 text-dark">遊戲種類:</label>
                                    <a>{{jsonData.gameTypeName}}</a>
                                </p>
                                <p class="theme-link mb-2">
                                    <label class="m-0 text-dark">遊戲公司:</label>
                                    <a>{{jsonData.gameCompanyName}}</a>
                                </p>
                                <p class="theme-link m-0">
                                    <label class="m-0 text-dark">Share:</label>
                                    <a class="icon icon-sm icon-secondary me-2" href="javascript:void(0);">
                                        <i class="bi bi-facebook"></i>
                                    </a>
                                    <a class="icon icon-sm icon-secondary me-2" href="javascript:void(0);">
                                        <i class="bi bi-twitter"></i>
                                    </a>
                                    <a class="icon icon-sm icon-secondary me-2" href="javascript:void(0);">
                                        <i class="bi bi-instagram"></i>
                                    </a>
                                    <a class="icon icon-sm icon-secondary me-2" href="javascript:void(0);">
                                        <i class="bi bi-linkedin"></i>
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                    <!-- End Product Details -->
                    <!-- </div> -->
                </div>

        </section>
        <!-- End Product Details -->

        <!-- 商品規格 -->
        <section name="pd_information" id="pd_information">
            <h3 class="sub-heading"> 實機照片 </h3>
            <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel"
                style="width: 50%; height: 50%;">
                <div class="carousel-inner" style="height: 100%;">
                    <div class="carousel-item active">
                        <img :src="`data:image/png;base64,${jsonData.Pics[1].productPicContentBase64}`" class="d-block"
                            alt="..." style="width: 100%; height: 100%;">
                    </div>
                    <div class="carousel-item" style="height: 100%;">
                        <img :src="`data:image/png;base64,${jsonData.Pics[2].productPicContentBase64}`" class="d-block"
                            alt="..." style="width: 100%; height: 100%;">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>

        </section>
        <!-- 評論區 -->
        <section name="pd_information" id="pd_review" v-show="reviewShow">
            <div class="idpostion"></div>
            <div class="pd-collapse-row">
                <h1 class="sub-heading"> 會員評鑑 </h1>

                <!-- <a class="pd-collapse-h5" data-bs-toggle="collapse" role="button" aria-expanded="false"
                            aria-controls="pd_review">評論區 <i class="bi bi-chevron-up"></i></a> -->
                <div class="collapse show">
                    <div class="pd-collapse-box">
                        <div class="row align-items-end">
                            <div class="col-sm-6">
                                <div class="rating-star small">
                                    <i class="bi small bi-star-fill active"
                                        v-for="(item, index) in CaledCommentsData.avgCommentStar" :key="index"></i>

                                    <i class="bi small bi-star"
                                        v-for="(item, index) in (5-CaledCommentsData.avgCommentStar)" :key="index"></i>
                                    <span>{{(CaledCommentsData.sumCommentStar/CaledCommentsData.countComment).toFixed(2)}}/5
                                        ({{CaledCommentsData.countComment}} Comments)</span>
                                </div>
                            </div>
                        </div>
                        <section class="row" id="content" name="content">
                            <card-template :read-data="renderData" :now-page="nowPage"></card-template>
                        </section>

                        <nav class="d-flex justify-content-center">
                            <pagination-list :pages="renderData" :now-page="nowPage" :total-page="totalPage"
                                @skip-page="skipPage" @previous-page="previousPage" @next-page="nextPage">
                            </pagination-list>
                        </nav>
                    </div>
                </div>
            </div>
        </section>



        <!-- 商品詳情over -->
        <!-- 跳出加入購物車的視窗 -->
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
            <div id="liveToast1" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <img src="../mainCss/images/logo.png" class="rounded me-2" alt="..."
                        style="width: 10%; height: 10%;">
                    <strong class="me-auto">系統訊息</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body" style="background-color: #7d879c;;">
                    <h6 style="color: aliceblue;">商品成功加入購物車!!</h6>
                </div>
            </div>
        </div>
        <!-- 跳出需先加入會員的視窗 -->
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
            <div id="loginToFavMas" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <img src="../mainCss/images/logo.png" class="rounded me-2" alt="..."
                        style="width: 10%; height: 10%;">
                    <strong class="me-auto">系統訊息</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body" style="background-color: #7d879c;;">
                    <h6 style="color: aliceblue;">請先登入會員唷</h6>
                </div>
            </div>
        </div>
        <!-- 跳出成功加入我的最愛的視窗 -->
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
            <div id="sucessToFavMas" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <img src="../mainCss/images/logo.png" class="rounded me-2" alt="..."
                        style="width: 10%; height: 10%;">
                    <strong class="me-auto">系統訊息</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body" style="background-color: #7d879c;;">
                    <h6 style="color: aliceblue;">商品已成功添加至我的最愛</h6>
                </div>
            </div>
        </div>
        <!-- 跳出重複加入我的最愛的視窗 -->
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
            <div id="dupliToFavMas" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <img src="../mainCss/images/logo.png" class="rounded me-2" alt="..."
                        style="width: 10%; height: 10%;">
                    <strong class="me-auto">系統訊息</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body" style="background-color: #7d879c;;">
                    <h6 style="color: aliceblue;">我的最愛清單上已經有這個商品囉</h6>
                </div>
            </div>
        </div>



    </main>
    <!-- End Main -->





    <!-- onSale items section starts -->



    <!-- footer section starts -->

    <footer class="bg-white footer">
        <div class="footer-top py-6">
            <div class="container">
                <div class="row">
                    <section class="footer">
                        <div class="box-container">
                            <div class="box">
                                <h3>會員專區</h3>
                                <a href="#">會員登入</a>
                                <a href="#">會員註冊</a>
                                <a href="#">訂單管理</a>
                                <a href="#">二手遊戲申請上架單管理</a>
                            </div>

                            <div class="box">
                                <h3>快速連結</h3>
                                <a href="#">首頁</a>
                                <a href="#">遊戲商城</a>
                                <a href="#">二手競標商城</a>
                                <a href="#">遊戲討論區</a>
                            </div>

                            <div class="box">
                                <h3>聯絡我們</h3>
                                <a href="#">02-3456-7890</a>
                                <a href="#">03-1111-2222</a>
                                <a href="#">CGA101G1@gmail.com</a>
                                <a href="#">anasbhai@gmail.com</a>
                            </div>

                            <div class="box">
                                <h3>關於我們</h3>
                                <a href="#">管理團隊</a>
                                <a href="#">創始理念</a>
                                <a href="#">insuagram</a>
                                <a href="#">linkedin</a>
                            </div>
                        </div>

                        <div class="credit">copyright@2022 by <span>CGA101G1</span></div>

                    </section>
                </div>
            </div>
        </div>

    </footer>
    <!-- footer section ends -->



























    <!-- 外來區 -->
    <!-- jquery -->
    <script src="../mainCss/assets/js/jquery-3.5.1.min.js"></script>
    <!-- appear -->
    <script src="../mainCss/assets/vendor/appear/jquery.appear.js"></script>
    <!--bootstrap-->
    <script src="../mainCss/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- owl-carousel -->
    <script src="../mainCss/assets/vendor/slick/slick.min.js"></script>
    <!-- magnific -->
    <script src="../mainCss/assets/vendor/magnific/jquery.magnific-popup.min.js"></script>
    <!-- isotope -->
    <script src="../mainCss/assets/vendor/isotope/isotope.pkgd.min.js"></script>
    <!-- count-down -->
    <script src="../mainCss/assets/vendor/count-down/jquery.countdown.min.js"></script>
    <!-- Theme Js -->
    <script src="../mainCss/assets/js/custom.js"></script>
    <!-- 外來區over -->
    <!-- custom js file link -->
    <script src=".\\js\\script.js"></script>

    <script>




        const app = Vue.createApp({
            data() {
                return {
                    // jsonUrl: 'https://api.kcg.gov.tw/api/service/Get/9c8e1450-e833-499c-8320-29b36b7ace5c',
                    jsonData: [[], []], // 初始資料
                    // jsonData: [],
                    images: [],
                    ProductName: "",
                    CommentsData: [],
                    CaledCommentsData: [],
                    reviewShow: false,

                    //分頁用
                    renderData: [], // 建立每頁顯示資料
                    pageBaseNum: 5,  // 每頁顯示資料數量
                    nowPage: 0, // 初始、現在頁數

                }
            },
            methods: {
                getProductData() {
                    let getUrlString = location.href;
                    let url = new URL(getUrlString);
                    let myURL = url.searchParams.get('ProductNo');
                    // console.log(myURL);


                    const apiUrl = '/CGA101G1/product/OneProductDetail?ProductNo=' + myURL;

                    // console.log("這是產品詳情：" + apiUrl);
                    axios.get(apiUrl)
                        // 一定要用箭頭函示!!!!
                        .then((response) => {
                            console.log("取ProductData的狀態：" + response.status); //狀態碼
                            // console.log(response.data);
                            this.jsonData = response.data;//塞進去
                            this.jsonData.Pics = [];
                            console.log("datastore讀取資料ok");
                            // console.log(this.jsonData);
                            console.log("開始存圖片")
                            this.getPicData();

                        });
                },
                getPicData() {
                    let getUrlString = location.href;
                    let url = new URL(getUrlString);
                    let myURL = url.searchParams.get('ProductNo');
                    // console.log(myURL);
                    const apiUrl = '/CGA101G1/product/ProductPicAll?ProductNo=' + myURL;
                    // console.log("這是產品圖片詳情：" + apiUrl);
                    axios.get(apiUrl)
                        // 一定要用箭頭函示!!!!
                        .then((response) => {
                            console.log("取pic的狀態：" + response.status); //狀態碼
                            this.images = response.data;//塞進去
                            console.log("取pic的狀態讀取資料ok");

                            response.data.forEach(element => {
                                this.jsonData.Pics.push(element);
                            });
                        });
                },
                getCommentsData() {
                    let getUrlString = location.href;
                    let url = new URL(getUrlString);
                    let myURL = url.searchParams.get('ProductNo');
                    // console.log(myURL);
                    const apiUrl = '/CGA101G1/product/showOneProductAllComments?ProductNo=' + myURL;
                    console.log("這是評論的：" + apiUrl);
                    axios.get(apiUrl)
                        // 一定要用箭頭函示!!!!
                        .then((response) => {
                            console.log("取評論的狀態：" + response.status); //狀態碼
                            this.CommentsData = response.data;//塞進去
                            arrayCommentsData = [...this.CommentsData];
                            if (arrayCommentsData.length != 0) {
                                this.reviewShow = true;
                            };
                            console.log("取評論的狀態讀取資料ok");
                            this.renderingPage();
                        });
                },
                getCaledCommentsData() {
                    let getUrlString = location.href;
                    let url = new URL(getUrlString);
                    let myURL = url.searchParams.get('ProductNo');
                    // console.log(myURL);
                    const apiUrl = '/CGA101G1/product/showProductCaledComment?ProductNo=' + myURL;
                    console.log("這是評論的：" + apiUrl);
                    axios.get(apiUrl)
                        // 一定要用箭頭函示!!!!
                        .then((response) => {
                            console.log("取計算過評論的狀態：" + response.status); //狀態碼
                            this.CaledCommentsData = response.data;//塞進去
                            console.log("取計算過評論的狀態讀取資料ok");
                            console.log(this.CaledCommentsData);
                        });
                },
                getComponentInfo() {

                    this.$refs.innerComponent.number += 1
                },
                openModal() {
                    this.bsModal.show();
                },
                subtraction() {

                    if (this.$refs.innerComponent.number > 1) {
                        this.$refs.innerComponent.number -= 1;
                    }


                },
                sendData() {

                    let toastLiveExample1 = document.getElementById('liveToast1');

                    productSales = this.$refs.innerComponent.number;
                    totalPrice = (this.$refs.innerComponent.number * this.jsonData.productPrice);
                    productNo = (this.jsonData.productNo);
                    productName = (this.jsonData.productName);

                    axios({
                        method: 'post',
                        url: '/CGA101G1/product/add2ShoppingCart?ProductNo=' + `${productNo}` + '&ProductSales=' + `${productSales}` + '&ProductTotalPrice=' + `${totalPrice}` + '&ProductName=' + `${productName}`,
                        // 請更新
                    })
                        .then((response) => {
                            console.log(response);
                            let toast = new bootstrap.Toast(toastLiveExample1)
                            toast.show();
                        })
                },

                webcamSendRequestButton1(e) {
                    let loginToFavMas = document.getElementById('loginToFavMas');
                    let sucessToFavMas = document.getElementById('sucessToFavMas');
                    let dupliToFavMas = document.getElementById('dupliToFavMas');

                    // :href="`/CGA101G1/product/AddProduct2FavFromAlone?ProductNo=`+jsonData.productNo"
                    sendURL = '/CGA101G1/product/AddProduct2FavFromAlone?ProductNo=' + `${e.target.value}`;
                    axios({
                        method: 'post',
                        url: sendURL,
                    })
                        .then((response) => {
                            console.log(response.data);
                            if (response.data == 0) {
                                console.log("需登入會員");
                                let loginToFavMasToast = new bootstrap.Toast(loginToFavMas);
                                loginToFavMasToast.show();
                            } else if (response.data == 1) {
                                console.log("成功加入我的最愛");
                                let sucessToFavMasToast = new bootstrap.Toast(sucessToFavMas);
                                sucessToFavMasToast.show();
                            } else if (response.data == 2) {
                                console.log("我的最愛已經有這個商品囉");
                                let dupliToFavMasToast = new bootstrap.Toast(dupliToFavMas);
                                dupliToFavMasToast.show();
                            }


                        });
                },

                //分頁
                renderingPage() {
                    for (let n = 0; n < this.totalPage; n++) { // 依每頁顯示數量建立新陣列
                        this.renderData.push(
                            (this.CommentsData.slice
                                (n * this.pageBaseNum, n * this.pageBaseNum + this.pageBaseNum)
                            )
                        );
                    }
                },
                previousPage() {
                    if (this.nowPage != 0) { // 頁數初始值為 0 
                        this.nowPage = this.nowPage - 1;  // 當頁數不是初始值，減一頁(回上一頁)
                    }
                },
                nextPage() {
                    if (this.nowPage < this.totalPage - 1) {
                        this.nowPage++;  // 當頁數小於總頁數，加一頁(下一頁)
                    }
                },
                skipPage(pageNum) {
                    this.nowPage = pageNum; // 將資料換成點擊的頁碼，切換頁面
                },
            },
            computed: {
                totalPage() {
                    return Math.ceil(this.CommentsData.length / this.pageBaseNum); // 依每頁數量計算總頁數
                }
            },
            created() {
                this.getProductData();
                this.getCommentsData();
                this.getCaledCommentsData();
            }
        })

        app.component('card', {
            data() {
                return {
                    number: 1,
                }
            },
            template: `
      <div class="card" style="width: 95px;height:100% ">

          <p class="cart-qty-input form-control" style="height: 80%; padding-left:50px ; font-size:1rem ;margin:auto ;border:0 ;background-color: white;">{{ number }}</p>

      </div>
    `,
            props: ['item']
        })
        app.component('card-template', {
            data() {
                return {
                    a: ";",
                }
            },
            props: ['readData', 'nowPage'],
            methods: {
                webcamSendRequestButton: function (e) {

                    // 取編號跟錢，分離商品編號跟價錢再傳出去
                    console.log(e.target.value);
                    console.log(e.target.value.split(';'));
                    console.log("ProNo:" + e.target.value.split(';')[0]);
                    proNo = e.target.value.split(';')[0];
                    console.log("ProPrice:" + e.target.value.split(';')[1]);
                    proPrice = e.target.value.split(';')[1];
                    console.log("ProName:" + e.target.value.split(';')[2]);
                    proName = e.target.value.split(';')[2];

                    axios({
                        method: 'post',
                        url: '/CGA101G1/product/add2ShoppingCart?ProductNo=' + `${proNo}` + '&ProductSales=1' + '&ProductTotalPrice=' + `${proPrice}` + '&ProductName=' + `${proName}`,
                    })
                        .then((response) => console.log(response));
                    alert("成功加入購物車");
                }
            },
            template: `
            <div v-for="(item, index) in readData[nowPage]" :key="index">
                            <div class="d-flex review-box border-top mt-3 pt-3">
                                <div>
                                    <div class="review-image sm">
                                        <img class="img-fluid" :src=item.memPicURL title="" alt="">
                                    </div>
                                </div>
                                <div class="col ps-3">
                                    <h5 class="m-0">{{item.memAccount}}</h5>
                                    <div class="rating-star small">
                                        <i class="bi small bi-star-fill active"
                                            v-for="(item, index) in item.commentStar" :key="index"></i>
                                        <i class="bi small bi-star" v-for="(item, index) in (5-item.commentStar)"
                                            :key="index"></i>
                                    </div>
                                    <span>購買時間：{{item.commentTime}}</span>
                                    <p class="m-0 pt-2 small">評論：{{item.commentCotent}}</p>
                                </div>
                            </div>
                        </div>
  `,
        })

        app.component('pagination-list', {
            props: ['pages', 'nowPage', 'totalPage'],
            methods: {
                previousPage() {  // 下一頁
                    this.$emit('previousPage');
                },
                nextPage() {  // 上一頁
                    this.$emit('nextPage');
                },
                skipPage(pageNum) { // 跳頁
                    this.$emit('skipPage', pageNum);
                },
            },
            template: `
      <ul class="pagination" id="pageid">
      
        <!-- <li class="page-item" v-if="nowPage > 0" @click.prevent="previousPage"><a class="page-link" href="#">Previous</a></li> -->
        
        <li class="page-item" :class="{'disabled' : nowPage === 0 }" @click.prevent="previousPage"><a class="page-link" href="#">Previous</a></li>
        
        <li class="page-item" :class="{'active' : nowPage === index}" v-for="(item, index) in pages" :key="index + 1" @click.prevent="skipPage(index)"><a class="page-link" href="#" data-page="{{index + 1}}">{{index + 1}}</a></li>
        
        <li class="page-item" :class="{'disabled' : nowPage === totalPage - 1}" @click.prevent="nextPage"><a class="page-link" href="#">Next</a></li>

        <!-- <li class="page-item" v-if="nowPage < totalPage - 1" @click.prevent="nextPage"><a class="page-link" href="#">Next</a></li> -->
        
      </ul>
  `,
        })

        app.mount('#app');








    </script>

    <script src="../mainCss/assets/js/custom.js"></script>
</body>

</html>